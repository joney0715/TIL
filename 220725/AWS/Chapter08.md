# 8. DNS와 네트워크 라우팅

- DNS는 사람이 읽을 수 있는 이름으로 네트워크상에서 리소스를 사용할 수 있게 하는 역할
- Amazon Route53은 도메인 서비스를 관리, 리소스 전송의 정확성과 속도에 영향
- CloudFront는 글로벌 콘텐츠 전송 네트워크, 속도와 정확성을 향상



## 8-1 Domain Name System

- DNS는 사람이 읽을 수 있는 이름으로 네트워크상에서 리소스를 사용할 수 있게 하는 역할



### 네임 스페이스

- 인터넷 주소 체계는 인터넷을 구성하는 수십억 개 객체를 조직화하고 이름 변환 방식으로 관리
- 인터넷 이름 시스템은 도메인 이름 계층 구조의 네임 스페이스 내에서 관리되며, 사람이 읽을 수 있는 이름과 연결될 수 있도록 함 (계층 구조)



### 이름 서버

- 이름 서버의 역할은 amazon.com 같은 도메인 이름을 실제 IP 주소와 연결
- 모든 컴퓨터에는 내부에 간단한 이름 서버 데이터베이스를 갖고 있음
- 이 데이터베이스에는 localhost 와 같이 hostnames와 IP 주소가 연결된 항목이 포함



### 도메인과 도메인 이름

- 인터넷 주소의 관점에서 도메인은 하나 이상의 서버, 데이터 저장소나 단일 도메인 이름으로 식별되는 디지털 리소스
- 네트워크 요청을 이 도메인 리소스로 연결하기 위해 등록한 이름을 도메인 이름이라 부름



### 도메인 등록

- 최상위 이름 서버가 새 도메인 이름 쿼리에 응답하려면 그 전에 이름 서버에 해당 도메인 이름이 등록돼 있어야 함
- 도메인 이름 등록 대행자는 이름 서버 간에 도메인 이름 데이터를 전파
- 도메인 이름 등록 대행자는 등록 운영자와 협업해서 등록된 도메인이 전 세계에서 통용될 수 있도록 함
- Route53은 도메인 이름 등록 대행자 역할



### 도메인 계층

- 도메인 이름은 여러 부분으로 구성
- 가장 오른쪽 텍스트(예를 들어 .com)는 최상위 도메인(TLD)
- TLD의 왼쪽에 있는 이름(amazon.com의 amazon)은 2단계 도메인(SLD)
- SLD는 일부 국가에서 사용되는 특정 도메인을 지칭하기도 함 (예를들어 co.kr의 co)
- 하위 도메인은 도메인 리소스의 하위 집합
- 하위 도메인은 www.school.edu와 같은 형식



### FQDN (Fully Qualified Domain Name)

- 시스템의 기본 도메인 이름은 도메인의 일부 이름을 풀이할 때 DNS설정에 따라 자동으로 추가
- 추가된 부분 도메인 이름 없이 그대로 도메인 이름을 요청할 경우, FQND를 사용해야 함
- FQDN은 최소한의 하위 도메인과 TLD가 있는 도메인의 절대 위치가 포함
- TLD 뒤에 점(.)이 FQDN이라는 것을 알려줌



### 영역과 영역 파일

- 영역(Route53의 호스팅 영역)은 DNS 도메인의 하위 집합
- 영역 파일은 영역 내 리소스와 도메인의 DNS 주소를 연결하는 방식을 기술한 텍스트 파일

| 명령          | 목적                                           |
| ------------- | ---------------------------------------------- |
| 이름          | 정의된 도메인 또는 하위 도메인 이름            |
| TTL           | 레코드가 만료되기 전 활성 기간                 |
| 레코드 클래스 | 레코드의 네임 스페이스 - 통상적으로 IN(인터넷) |
| 레코드 유형   | 레코드에 정의된 레코드 유형                    |

 

### 레코드 유형

- 영역 파일의 리소스 레코드에 입력된 레코드 유형에 따라 레코드의 데이터 형식과 사용 방법이 결정
- 표는 일반적인 DNS 레코드 유형

| 유형  | 기능                                                         |
| ----- | ------------------------------------------------------------ |
| A     | 호스트 이름과 IPv4 IP주소 연결                               |
| CNAMW | Canonical Name한 호스트 이름을 다른 호스트 이름의 대체 도메인 이름으로 지정 |
| MX    | Mail eXchange 도메인을 메시지 전달 에이전트와 연결           |
| AAAA  | 호스트 이름을 IPv6 주소와 연결                               |
| TXT   | Text 사람이나기계가 읽을 수 있는 텍스트                      |



### 별칭 레코드

- 별칭 레코드를 사용해서 한 도메인의 트래픽을 다른 도메인으로 라우팅을 할 수도 있음
- Route53의 레코드 집합에서 서비스 제공자 간의 별칭 레코드 사용 가능 



